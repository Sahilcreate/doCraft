<div class="tasks-container space-y-6 px-4 max-w-screen-md mx-auto">
  <!-- Add Task Button -->
  <div class="add-task-container">
    <form action="/tasks/form" method="get">
      <button
        type="submit"
        class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 cursor-pointer transition-all"
      >
        Add Task
      </button>
    </form>
  </div>

  <!-- Tasks Wrapper -->
  <div class="tasks-wrapper space-y-6">
    <% if ( tasks.length === 0 ) { %>
    <p class="no-tasks-msg text-gray-500 italic">
      No tasks yet. Add one to get started!
    </p>
    <% } else { %> <% tasks.forEach((task) => { %>
    <div
      class="task flex items-center justify-between p-4 rounded-lg shadow-sm border text-sm <%= task.is_completed ? 'bg-gray-200 opacity-70' : 'bg-white' %>"
    >
      <div class="flex items-center gap-3 flex-1">
        <form action="/tasks/<%= task.id %>/toggle" method="post">
          <label>
            <input type="checkbox" name="completed" value="true" class="h-5 w-5
            text-blue-600 border-gray-300 rounded focus:ring-blue-500
            cursor-pointer" <%= task.is_completed ? 'checked' : ''%>
            onChange="this.form.submit()" />
          </label>
        </form>
        <div
          class="text-base font-medium transition-all relative group <%= task.is_completed ? 'line-through text-gray-500' : 'text-gray-800 hover:text-blue-600' %>"
        >
          <a href="/tasks/<%= task.id %>" class="hover:underline">
            <%= task.title %>
          </a>

          <span
            class="absolute bottom-full mb-1 hidden group-hover:block bg-black text-white text-xs px-2 py-1 rounded"
            >Open Task</span
          >
        </div>
      </div>

      <div class="text-right text-gray-500 min-w-[150px] ml-4">
        <div>
          <span class="font-medium text-gray-700">Created:</span>
          <%= task.created_at ? new
          Date(task.created_at).toLocaleString('en-US', { month: 'long', day:
          'numeric', year: 'numeric' }) : 'N/A' %>
        </div>
        <div class="mt-1">
          <span class="font-medium text-gray-700">Due:</span>
          <%= task.due_date ? new Date(task.due_date).toLocaleString('en-US', {
          month: 'long', day: 'numeric', year: 'numeric' }) : 'N/A' %>
        </div>
      </div>

      <div class="flex items-center gap-2 ml-4">
        <form action="/tasks/<%= task.id %>/form" method="get">
          <div class="relative group">
            <button
              type="submit"
              class="p-2 hover:bg-green-200 rounded-md transition cursor-pointer"
              aria-label="Edit <%= task.title %>"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="w-5 h-5"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M16.862 3.487a2.25 2.25 0 1 1 3.182 3.182L7.5 19.213l-4.5 1.5 1.5-4.5 12.362-12.726z"
                />
              </svg>
            </button>
            <span
              class="absolute bottom-full mb-1 hidden group-hover:block bg-black text-white text-xs px-2 py-1 rounded"
              >Edit</span
            >
          </div>
        </form>
        <form action="/tasks/<%= task.id %>/delete" method="post">
          <div class="relative group">
            <button
              type="submit"
              class="p-2 hover:bg-red-200 rounded-md transition cursor-pointer"
              aria-label="Edit <%= task.title %>"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="w-5 h-5"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M6 18L18 6M6 6l12 12"
                />
              </svg>
            </button>
            <span
              class="absolute bottom-full mb-1 hidden group-hover:block bg-black text-white text-xs px-2 py-1 rounded"
              >Delete</span
            >
          </div>
        </form>
      </div>
    </div>
    <br />
    <% }); %> <% } %>
  </div>
</div>
